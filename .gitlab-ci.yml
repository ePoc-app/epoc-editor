stages:
- build

before_script:
  - dpkg --add-architecture i386
  - apt-get update -qy
  - apt-get -y install curl wine32
  - npm i

build:
  image: node:16
  stage: build
  script:
    - npm run updatePreview
    - npm run build-all 
  artifacts:
    expire_in: 1 yr
    paths:
    - dist_electron/*.zip
    - dist_electron/*.deb
    - dist_electron/*.exe
  only:
    - main
    - web
    - tags